<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Victorien Bouvet ‚Äî e-Portfolio (ENSEEIHT 3EA)</title>
  <meta name="description" content="e-Portfolio conforme N7 : 6 onglets, frise antichronologique, projets d√©taill√©s, CV FR/EN." />
  <meta name="author" content="Victorien Bouvet" />
  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml"/>

  <style>
    /* ---------- Design Apple-like, mobile-first, th√®mes lisibles ---------- */
    :root{
      --bg:#0b0c0e; --surface:#121419; --elev:#171a20; --text:#f5f7fb; --muted:#b3b8c2;
      --link:#2997ff; --maxw:1120px; --radius:22px; --shadow:0 24px 60px rgba(0,0,0,.35);
      --card-border: rgba(255,255,255,.10);
      --h1:clamp(28px, 6vw, 56px); --h2:clamp(20px, 4vw, 30px); --lead:clamp(15px, 3.5vw, 19px);
      --nav-underline:#2997ff;
    }
    [data-theme="light"]{
      --bg:#fbfbfd; --surface:#ffffff; --elev:#ffffff; --text:#1d1d1f; --muted:#6e6e73;
      --shadow:0 24px 60px rgba(0,0,0,.08); --card-border: rgba(0,0,0,.12);
      --nav-underline:#0071e3;
    }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);
      font:16px/1.6 -apple-system,BlinkMacSystemFont,"SF Pro Text",Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility}
    a{color:var(--link);text-decoration:none} a:hover{text-decoration:underline}
    .wrap{max-width:var(--maxw);margin-inline:auto;padding:18px}

    /* ---------- Nav en verre + soulignement anim√© ---------- */
    header.nav{position:sticky;top:0;z-index:60;backdrop-filter:saturate(180%) blur(14px);
      background:linear-gradient(180deg, rgba(15,17,22,.85), rgba(15,17,22,.72)); border-bottom:1px solid var(--card-border)}
    [data-theme="light"] header.nav{background:linear-gradient(180deg, rgba(251,251,253,.85), rgba(251,251,253,.72))}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;gap:10px;max-width:var(--maxw);margin:auto;padding:10px 14px}
    nav ul{display:flex;gap:10px;list-style:none;margin:0;padding:0;flex-wrap:wrap}
    nav a{position:relative;color:var(--text);opacity:.92;padding:8px 10px;border-radius:10px}
    nav a::after{content:"";position:absolute;left:10px;right:10px;bottom:4px;height:2px;background:var(--nav-underline);
      transform:scaleX(0);transform-origin:left;transition:transform .35s ease}
    nav a:hover::after, nav a.active::after{transform:scaleX(1)}
    .brand{display:flex;gap:10px;align-items:center;font-weight:700}
    .brand .dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(145deg,#7c5cff,#22d3ee);box-shadow:0 0 0 6px #7c5cff22}
    .ctrls{display:flex;gap:8px;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:8px;border-radius:999px;padding:10px 14px;border:1px solid var(--card-border);background:var(--elev);color:var(--text);transition:transform .2s ease, box-shadow .2s ease}
    .btn:hover{transform:translateY(-1px); box-shadow:0 18px 40px rgba(0,0,0,.25)}
    .btn.primary{background:var(--text);color:var(--bg)}
    .ghost, select{background:transparent;color:var(--text);border:1px solid var(--card-border);padding:8px 12px;border-radius:999px}
    .card{background:var(--surface);border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}
    .chip{display:inline-flex;gap:8px;align-items:center;border:1px solid var(--card-border);border-radius:999px;padding:6px 12px;color:var(--muted)}
    h1{font-size:var(--h1);line-height:1.08;margin:10px 0 8px}
    .h2{font-size:var(--h2);margin:0 0 10px}
    .lead{font-size:var(--lead);color:var(--muted)}
    .grid{display:grid;gap:16px}
    .cols-2{grid-template-columns:repeat(2,1fr)}
    .cols-3{grid-template-columns:repeat(3,1fr)}
    @media (max-width:960px){ .cols-3,.cols-2{grid-template-columns:1fr} .nav-inner{flex-wrap:wrap} .wrap{padding:14px} }
    .section{padding:22px 0}
    .tag{display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid var(--card-border);font-size:12px}
    .project{transition:transform .35s ease, box-shadow .35s ease}
    .project:hover{transform:translateY(-3px);box-shadow:0 32px 70px rgba(0,0,0,.35)}
    footer{padding:32px 14px;text-align:center;color:var(--muted)}

    /* ---------- Hero gradient (fix bug: scoped au hero seulement) ---------- */
    .hero{position:relative;isolation:isolate}
    .hero::before{content:"";position:absolute;inset:-20px -20px auto -20px;height:220px;border-radius:40px;
      background:linear-gradient(135deg,#7cc3ff33,#2997ff22);z-index:-1;filter:blur(20px)}

    /* ---------- Animations douces ---------- */
    @media (prefers-reduced-motion:no-preference){
      .fade{opacity:0;transform:translateY(8px)}
      .fade.show{opacity:1;transform:none;transition:.6s ease}
      .parallax{will-change:transform}
    }

    /* ---------- Timeline verticale (lisible + anim√©e) ---------- */
    .timeline{position:relative}
    .tl{position:relative;padding-left:22px}
    .tl::before{content:"";position:absolute;left:10px;top:0;bottom:0;width:2px;background:linear-gradient(var(--nav-underline),transparent)}
    .tli{position:relative;margin:0 0 16px 0;padding:12px 12px 12px 16px;border:1px solid var(--card-border);border-radius:14px;background:var(--surface)}
    .tli::before{content:"";position:absolute;left:-14px;top:18px;width:10px;height:10px;border-radius:50%;background:var(--nav-underline);box-shadow:0 0 0 6px color-mix(in oklab, var(--nav-underline) 30%, transparent)}
    .tli .small{color:var(--muted);font-size:13px}
    .timeline .tli{opacity:0;transform:translateY(12px)}
    .timeline.show .tli{opacity:1;transform:none;transition:opacity .5s ease, transform .5s ease}
    .timeline.show .tli:nth-child(1){transition-delay:.05s}
    .timeline.show .tli:nth-child(2){transition-delay:.15s}
    .timeline.show .tli:nth-child(3){transition-delay:.25s}
    .timeline.show .tli:nth-child(4){transition-delay:.35s}

    /* ---------- Vignettes projets : recadrage homog√®ne + zoom + cin√©matique ---------- */
    .project img.thumb{
      width:100%;
      aspect-ratio:16/9;
      object-fit:cover;
      object-position:center;
      border-radius:14px;
      border:1px solid var(--card-border);
      display:block;
      transition:transform .45s ease, box-shadow .45s ease, opacity .45s ease;
    }
    @media (hover:hover){
      .project:hover img.thumb{ transform:scale(1.04); box-shadow:0 16px 40px rgba(0,0,0,.30) }
    }
    @media (prefers-reduced-motion: no-preference){
      .thumb.cinematic{ opacity:.9; transform:scale(1.02); animation:heroZoom 6s ease-in-out infinite alternate; animation-play-state:paused }
      .thumb.cinematic.play{ animation-play-state:running }
      @keyframes heroZoom{ 0%{transform:scale(1.02)} 100%{transform:scale(1.06)} }
    }
    @supports not (aspect-ratio: 1 / 1){
      .project img.thumb{ height:220px }
      @media (max-width:520px){ .project img.thumb{ height:180px } }
    }
  </style>
</head>
<body>
  <header class="nav">
    <div class="nav-inner">
      <div class="brand"><span class="dot"></span><span>Victorien Bouvet</span></div>
      <nav aria-label="Principale">
        <ul>
          <li><a href="#home" id="nav-home">Home</a></li>
          <li><a href="#engineering" id="nav-eng">Engineering</a></li>
          <li><a href="#mobility" id="nav-mob">Mobility</a></li>
          <li><a href="#civic" id="nav-civic">Civic</a></li>
          <li><a href="#sports" id="nav-sport">Sports</a></li>
          <li><a href="#/projects" id="nav-projects">Projects</a></li>
        </ul>
      </nav>
      <div class="ctrls">
        <a id="cvBtn" class="btn primary" href="/assets/CV_Victorien_Bouvet_FR.pdf" download>CV (FR)</a>
        <button id="themeBtn" class="btn" aria-label="Basculer le th√®me">üåì</button>
        <select id="langSel" aria-label="Langue"><option value="fr" selected>FR</option><option value="en">EN</option></select>
      </div>
    </div>
  </header>

  <main class="wrap" id="app"><!-- rendu JS --></main>
  <footer><small>¬© <span id="year"></span> Victorien Bouvet ‚Äî ENSEEIHT 3EA</small></footer>

  <script>
  (function(){
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    $('#year').textContent = new Date().getFullYear();

    /* -------- Th√®me clair/sombre -------- */
    const root = document.documentElement;
    const themeBtn = $('#themeBtn');
    const savedTheme = localStorage.getItem('theme') || 'light';
    if(savedTheme === 'light') root.setAttribute('data-theme','light');
    themeBtn.addEventListener('click', ()=>{
      const isLight = root.getAttribute('data-theme') === 'light';
      if(isLight){ root.removeAttribute('data-theme'); localStorage.setItem('theme','dark'); }
      else { root.setAttribute('data-theme','light'); localStorage.setItem('theme','light'); }
    });

    /* -------- Donn√©es projets -------- */
    const data = {
      projects:[
        {slug:'rf-psu-bench',
         fr:{title:'Banc de test RF ‚Äî production', summary:'Automatisation LabVIEW et validation carte d‚Äôalimentation RF (McKay Brothers).',
             body:`<p><strong>Missions principales :</strong></p>
                   <ul>
                     <li>Tests fonctionnels & validation des performances du prototype de carte</li>
                     <li>Analyse/correction d‚Äôanomalies (signaux, <abbr title="Inter-Integrated Circuit">I¬≤C</abbr>, mesures √©lectriques)</li>
                     <li>Conception d‚Äôun <strong>banc de test</strong> de production (choix instruments, c√¢blage, ergonomie)</li>
                     <li>Programmation <strong>LabVIEW</strong> pour automatiser la validation en fin de ligne</li>
                     <li>Installation & formation en usine d‚Äôassemblage</li>
                   </ul>
                   <p class="small">Comp√©tences : test & validation, bancs de test, LabVIEW, protocoles (I¬≤C), travail d‚Äô√©quipe en anglais.</p>`},
         en:{title:'RF Production Test Bench', summary:'LabVIEW automation & validation for an RF PSU board (McKay Brothers).',
             body:`<p><strong>Main tasks:</strong></p>
                   <ul>
                     <li>Functional tests & performance validation of the board prototype</li>
                     <li>Debugging signals, <abbr title="Inter-Integrated Circuit">I¬≤C</abbr> communication, electrical measurements</li>
                     <li>Design of a <strong>production test bench</strong> (instrument choice, wiring, ergonomics)</li>
                     <li><strong>LabVIEW</strong> automation for end-of-line validation</li>
                     <li>On-site deployment & operator training</li>
                   </ul>
                   <p class="small">Skills: test & validation, test benches, LabVIEW, protocols (I¬≤C), teamwork in English.</p>`},
         media:{cover:'/assets/projects/rf/cover.jpg'}
        },
        {slug:'supermarine-mm01',
         fr:{title:'Prototype Supermarine MM01', summary:'Fabrication additive, essais optiques & support √©lectronique.',
             body:`<p>Participation au d√©veloppement du prototype : gestion des impressions 3D, montage, essais optiques, int√©grations √©lectroniques.</p>`},
         en:{title:'Supermarine MM01 Prototype', summary:'Additive manufacturing, optical testing & electronic support.',
             body:`<p>Prototype development: 3D printing workflow, assembly, optical testing, electronic integrations.</p>`},
         media:{cover:'/assets/projects/mm01/cover.jpg'}
        },
        {slug:'live-sound',
         fr:{title:'R√©gie son ‚Äî grands √©v√©nements', summary:'Behringer X32, r√©seau Dante, processeurs num√©riques.',
             body:`<p>R√©gie technique sur de grands rassemblements : mix FOH, r√©seau Dante, gestion des sc√®nes et contraintes de s√©curit√©.</p>`},
         en:{title:'Live Sound ‚Äî Large Events', summary:'Behringer X32, Dante networking, digital processors.',
             body:`<p>Tech crew for large events: FOH mixing, Dante network, scene management, safety constraints.</p>`},
         media:{cover:'/assets/projects/audio/cover.jpg'}
        }
      ]
    };

    /* -------- Contenus FR/EN (vouvoiement FR) -------- */
    const i18n = {
      fr:{
        nav:{home:'Accueil',eng:'Parcours ing√©nieur',mob:'Mobilit√©',civic:'Engagement',sport:'Sports & activit√©s',projects:'Projets'},
        cv:{label:'CV (FR)',href:'/assets/CV_Victorien_Bouvet_FR.pdf'},
        home:`<section id="home" class="section hero">
                <div class="grid cols-2">
                  <div class="card fade">
                    <span class="chip">ENSEEIHT ¬∑ Fili√®re 3EA</span>
                    <h1>Victorien Bouvet</h1>
                    <p class="lead">√âtudiant de <strong>premi√®re ann√©e</strong> √† l‚Äô<strong>ENSEEIHT</strong> (3EA ‚Äî √âlectronique, √ânergie √âlectrique, Automatique), apr√®s une <strong>CPGE ATS</strong> et un <strong>DUT Mesures Physiques</strong>. Je m‚Äôint√©resse au prototypage, au test & √† l‚Äôinstrumentation, et aux syst√®mes embarqu√©s.</p>
                    <div class="grid cols-2" style="margin-top:8px">
                      <a class="btn primary" href="/assets/CV_Victorien_Bouvet_FR.pdf" download>üìÑ T√©l√©charger le CV (FR)</a>
                      <a class="btn" href="/assets/CV_Victorien_Bouvet_EN.pdf" download>üìÑ Resume (EN)</a>
                    </div>
                  </div>
                  <div class="card fade">
                    <h3 class="h2">Elevator pitch (√† venir)</h3>
                    <p class="small">Ajoutez la vid√©o ici : <code>/assets/elevator.mp4</code></p>
                    <video controls width="100%" poster="/assets/elevator-poster.jpg">
                      <source src="/assets/elevator.mp4" type="video/mp4"/>
                      Votre navigateur ne prend pas en charge la vid√©o.
                    </video>
                  </div>
                </div>
              </section>
              ${renderTimelineHTML('fr')}`,
        engineering:`<section id="engineering" class="section">
              <div class="card fade">
                <h2 class="h2">Parcours ing√©nieur</h2>
                <p><strong>3EA ‚Äî ENSEEIHT (2025‚Äì2028).</strong> C≈ìurs : √©lectronique analogique & puissance, automatique, traitement du signal, instrumentation. </p>
                <p class="small">CPGE ATS ‚Äî Rennes (2024‚Äì2025) : math√©matiques, physique, SI, anglais, philosophie.</p>
                <p class="small">DUT Mesures Physiques ‚Äî IUT d‚ÄôOrsay, Univ. Paris-Saclay (2022‚Äì2024) : instrumentation, LabVIEW, SolidWorks, gestion de projet.</p>
              </div>
            </section>`,
        mobility:`<section id="mobility" class="section">
              <div class="card fade">
                <h2 class="h2">Mobilit√© internationale</h2>
                <p>Objectifs : renforcer l‚Äôanglais technique, d√©couvrir des √©cosyst√®mes R&D et approfondir l‚Äôinstrumentation. <em>Destinations √† pr√©ciser</em>.</p>
              </div>
            </section>`,
        civic:`<section id="civic" class="section">
              <div class="card fade">
                <h2 class="h2">Engagement</h2>
                <p><strong>Scouts et Guides de France</strong> ‚Äî Scout depuis 2013 (12 ans). Valeurs : service, leadership, gestion du risque, esprit d‚Äô√©quipe.</p>
              </div>
            </section>`,
        sports:`<section id="sports" class="section">
              <div class="card fade">
                <h2 class="h2">Sports & autres activit√©s</h2>
                <p>Voile (FFV niv. 3), ski freeride, violon. Soft skills : leadership, collaboration, r√©silience.</p>
              </div>
            </section>`,
        projectsIntro:`<section class="section"><div class="card fade">
              <h2 class="h2">Projets</h2><p class="lead">Cliquez sur ‚ÄúProjets‚Äù dans le menu ou <a href="#/projects">ouvrez la page d√©di√©e</a>.</p>
            </div></section>`,
        back:'‚Üê Retour',
        ctaMore:'En savoir plus ‚Üí'
      },
      en:{
        nav:{home:'Welcome',eng:'Engineering',mob:'Mobility',civic:'Civic',sport:'Sports',projects:'Projects'},
        cv:{label:'Resume (EN)',href:'/assets/CV_Victorien_Bouvet_EN.pdf'},
        home:`<section id="home" class="section hero">
                <div class="grid cols-2">
                  <div class="card fade">
                    <span class="chip">ENSEEIHT ¬∑ 3EA</span>
                    <h1>Victorien Bouvet</h1>
                    <p class="lead">First-year student at <strong>ENSEEIHT</strong> (3EA ‚Äî Electronics, Electrical Energy & Automation), after a <strong>CPGE ATS</strong> and a <strong>DUT in Physical Measurements</strong>. Interests: prototyping, test & instrumentation, embedded systems.</p>
                    <div class="grid cols-2" style="margin-top:8px">
                      <a class="btn" href="/assets/CV_Victorien_Bouvet_FR.pdf" download>üìÑ CV (FR)</a>
                      <a class="btn primary" href="/assets/CV_Victorien_Bouvet_EN.pdf" download>üìÑ Resume (EN)</a>
                    </div>
                  </div>
                  <div class="card fade">
                    <h3 class="h2">Elevator pitch (coming soon)</h3>
                    <p class="small">Add your video at: <code>/assets/elevator.mp4</code></p>
                    <video controls width="100%" poster="/assets/elevator-poster.jpg">
                      <source src="/assets/elevator.mp4" type="video/mp4"/>
                      Your browser doesn‚Äôt support video.
                    </video>
                  </div>
                </div>
              </section>
              ${renderTimelineHTML('en')}`,
        engineering:`<section id="engineering" class="section">
              <div class="card fade">
                <h2 class="h2">Engineering course</h2>
                <p><strong>3EA ‚Äî ENSEEIHT (2025‚Äì2028).</strong> Core: analog & power electronics, control, signal processing, instrumentation.</p>
                <p class="small">CPGE ATS ‚Äî Rennes (2024‚Äì2025): mathematics, physics, industrial sciences, English, philosophy.</p>
                <p class="small">DUT Physical Measurements ‚Äî IUT d‚ÄôOrsay, Paris-Saclay (2022‚Äì2024): instrumentation, LabVIEW, SolidWorks, project management.</p>
              </div>
            </section>`,
        mobility:`<section id="mobility" class="section">
              <div class="card fade">
                <h2 class="h2">International mobility</h2>
                <p>Goals: strengthen technical English, discover R&D environments, deepen instrumentation. <em>Destinations to be defined</em>.</p>
              </div>
            </section>`,
        civic:`<section id="civic" class="section">
              <div class="card fade">
                <h2 class="h2">Civic engagement</h2>
                <p><strong>Scouts et Guides de France</strong> ‚Äî Member since 2013. Values: service, leadership, risk management, teamwork.</p>
              </div>
            </section>`,
        sports:`<section id="sports" class="section">
              <div class="card fade">
                <h2 class="h2">Sports & activities</h2>
                <p>Sailing (FFV L3), freeride skiing, violin. Soft skills: leadership, collaboration, resilience.</p>
              </div>
            </section>`,
        projectsIntro:`<section class="section"><div class="card fade">
              <h2 class="h2">Projects</h2><p class="lead">Click ‚ÄúProjects‚Äù in the menu or <a href="#/projects">open the dedicated page</a>.</p>
            </div></section>`,
        back:'‚Üê Back',
        ctaMore:'Learn more ‚Üí'
      }
    };

    /* -------- Frise verticale (HTML g√©n√©r√©) -------- */
    function renderTimelineHTML(lang){
      const items = (lang==='fr'
        ? [
            {t:'ENSEEIHT ‚Äî 3EA', s:'2025‚Äì2028 ¬∑ Premi√®re ann√©e (actuel)'},
            {t:'CPGE ATS ¬∑ Rennes', s:'2024‚Äì2025'},
            {t:'DUT Mesures Physiques ¬∑ IUT d‚ÄôOrsay', s:'2022‚Äì2024 ¬∑ Parcours Techniques d‚Äôinstrumentation'},
            {t:'Lyc√©e Saint Louis Saint Cl√©ment', s:'2019‚Äì2022 ¬∑ Bac G√©n√©ral (Maths & Physique-Chimie), mention'}
          ]
        : [
            {t:'ENSEEIHT ‚Äî 3EA', s:'2025‚Äì2028 ¬∑ Year 1 (current)'},
            {t:'CPGE ATS ¬∑ Rennes', s:'2024‚Äì2025'},
            {t:'DUT Physical Measurements ¬∑ IUT d‚ÄôOrsay', s:'2022‚Äì2024 ¬∑ Instrumentation track'},
            {t:'Saint Louis Saint Cl√©ment High School', s:'2019‚Äì2022 ¬∑ French Baccalaur√©at (Honors)'}
          ]);
      const lis = items.map(x=>`<div class="tli"><strong>${x.t}</strong><div class="small">${x.s}</div></div>`).join('');
      return `
        <section class="section">
          <div class="card fade timeline" id="timeline">
            <h2 class="h2" style="margin-bottom:10px">${lang==='fr'?'Parcours acad√©mique':'Academic pathway'}</h2>
            <div class="tl">${lis}</div>
          </div>
        </section>`;
    }

    /* -------- Cinematic observer (images) -------- */
    const cinObs = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('play'); cinObs.unobserve(e.target);} });
    }, {threshold:.35});
    function armCinematic(){ document.querySelectorAll('img.thumb.cinematic').forEach(img=>cinObs.observe(img)); }

    /* -------- Rendu & routing -------- */
    const app = $('#app'); const langSel = $('#langSel'); const cvBtn = $('#cvBtn');
    const getLang = () => (localStorage.getItem('lang') || ((navigator.language||'fr').toLowerCase().startsWith('fr')?'fr':'en'));

    function setActiveNav(hash){
      ['nav-home','nav-eng','nav-mob','nav-civic','nav-sport','nav-projects'].forEach(id=>$('#'+id).classList.remove('active'));
      if(hash.startsWith('/projects')||hash.startsWith('/project/')) $('#nav-projects').classList.add('active');
      else if(hash==='#home'||hash===''||hash==='#') $('#nav-home').classList.add('active');
      else if(hash==='#engineering') $('#nav-eng').classList.add('active');
      else if(hash==='#mobility') $('#nav-mob').classList.add('active');
      else if(hash==='#civic') $('#nav-civic').classList.add('active');
      else if(hash==='#sports') $('#nav-sport').classList.add('active');
    }

    function renderHome(lang){
      const t = i18n[lang];
      // nav labels + CV
      $('#nav-home').textContent=t.nav.home; $('#nav-eng').textContent=t.nav.eng;
      $('#nav-mob').textContent=t.nav.mob;   $('#nav-civic').textContent=t.nav.civic;
      $('#nav-sport').textContent=t.nav.sport; $('#nav-projects').textContent=t.nav.projects;
      cvBtn.textContent=t.cv.label; cvBtn.href=t.cv.href;
      // contenu
      app.innerHTML = t.home + t.engineering + t.mobility + t.civic + t.sports + t.projectsIntro;
      document.documentElement.lang = lang; localStorage.setItem('lang',lang);
      requestAnimationFrame(()=>{
        $$('.fade').forEach(el=>el.classList.add('show'));
        const tl = $('#timeline');
        if(tl){
          const obs = new IntersectionObserver((es)=>{ es.forEach(e=>{ if(e.isIntersecting){ tl.classList.add('show'); obs.disconnect(); } });},{threshold:.3});
          obs.observe(tl);
        }
      });
    }

    function renderProjectsList(lang){
      const t = i18n[lang];
      const items = data.projects.map(p=>{
        const L = p[lang];
        return `<article class="card project fade">
          <div class="grid cols-2" style="align-items:center">
            <img class="thumb cinematic" src="${p.media.cover||'/assets/placeholder.jpg'}" alt="${L.title}" loading="lazy">
            <div>
              <h3 style="margin:0 0 6px">${L.title}</h3>
              <p class="lead" style="margin:0 0 8px">${L.summary}</p>
              <p><a class="btn" href="#/project/${p.slug}">${t.ctaMore}</a></p>
            </div>
          </div>
        </article>`;
      }).join('');
      app.innerHTML = `<section class="section"><div class="card"><h2 class="h2">Projects</h2><p class="small">${lang==='fr'?'Page d√©di√©e aux projets et meilleures productions.':'Dedicated page for projects & deliverables.'}</p></div></section><section class="section">${items}</section>`;
      requestAnimationFrame(()=> { $$('.fade').forEach(el=>el.classList.add('show')); armCinematic(); });
    }

    function renderProjectDetail(slug, lang){
      const p = data.projects.find(x=>x.slug===slug);
      if(!p){ location.hash = '#/projects'; return; }
      const L = p[lang], t=i18n[lang];
      app.innerHTML = `<section class="section">
        <a href="#/projects" class="btn" style="margin-bottom:12px">${t.back}</a>
        <div class="card">
          <div class="grid cols-2" style="align-items:start">
            <img class="thumb cinematic" src="${p.media.cover||'/assets/placeholder.jpg'}" alt="${L.title}" loading="lazy">
            <div>
              <h2 class="h2" style="margin-top:0">${L.title}</h2>
              ${L.body}
            </div>
          </div>
        </div>
      </section>`;
      requestAnimationFrame(()=> armCinematic());
    }

    function route(){
      const lang = getLang();
      const h = location.hash.slice(1);
      setActiveNav('#'+h);
      if(h.startsWith('/project/')) renderProjectDetail(h.replace('/project/',''), lang);
      else if(h.startsWith('/projects')) renderProjectsList(lang);
      else renderHome(lang);
    }

    // Langue
    const initialLang = getLang();
    $('#langSel').value = initialLang;
    $('#langSel').addEventListener('change', e=>{ localStorage.setItem('lang', e.target.value); route(); });

    // D√©marrage + navigation
    window.addEventListener('hashchange', route);
    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', route, {once:true}); else route();
  })();
  </script>
</body>
</html>
